(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))l($);new MutationObserver($=>{for(const d of $)if(d.type==="childList")for(const b of d.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&l(b)}).observe(document,{childList:!0,subtree:!0});function s($){const d={};return $.integrity&&(d.integrity=$.integrity),$.referrerPolicy&&(d.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?d.credentials="include":$.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l($){if($.ep)return;$.ep=!0;const d=s($);fetch($.href,d)}})();(function(p){Date.now||(Date.now=function(){return new Date().getTime()}),Math.trunc||(Math.trunc=function(c){return c<0?Math.ceil(c):Math.floor(c)}),Object.setPrototypeOf||(Object.setPrototypeOf=function(c,s){return c.__proto__=s,c}),p.WebSharper={Runtime:{Ctor:function(c,s){return c.prototype=s.prototype,c},Class:function(c,s,l){var $=c;if(s){$=new s;for(var d in c)$[d]=c[d]}var b=function(Ne){if(Ne)for(var Me in Ne)this[Me]=Ne[Me]};if(b.prototype=$,l)for(var U in l)b[U]=l[U];return b},Clone:function(c){var s={};for(var l of Object.getOwnPropertyNames(c))s[l]=c[l];return Object.setPrototypeOf(s,Object.getPrototypeOf(c)),s},NewObject:function(c){for(var s={},l=0;l<c.length;l++)s[c[l][0]]=c[l][1];return s},PrintObject:function(c){var s="{ ",l=!0;for(var $ of Object.getOwnPropertyNames(c))l?l=!1:s+=", ",s+=$+" = "+c[$];return l?s+="}":s+=" }",s},DeleteEmptyFields:function(c,s){for(var l=0;l<s.length;l++){var $=s[l];c[$]===void 0&&delete c[$]}return c},GetOptional:function(c){return c===void 0?null:{$:1,$0:c}},SetOptional:function(c,s,l){l?c[s]=l.$0:delete c[s]},SetOrDelete:function(c,s,l){l===void 0?delete c[s]:c[s]=l},Apply:function(c,s,l){return c.apply(s,l)},Bind:function(c,s){return function(){return c.apply(this,arguments)}},CreateFuncWithArgs:function(c){return function(){return c(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(c){return function(){return c(this)}},CreateFuncWithThis:function(c){return function(){return c(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(c){return function(){return c(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(c,s){return function(){return s(Array.prototype.slice.call(arguments,0,c).concat([Array.prototype.slice.call(arguments,c)]))}},CreateFuncWithArgsRest:function(c,s){return function(){return s([Array.prototype.slice.call(arguments,0,c),Array.prototype.slice.call(arguments,c)])}},BindDelegate:function(c,s){var l=c.bind(s);return l.$Func=c,l.$Target=s,l},CreateDelegate:function(c){if(c.length==0)return null;if(c.length==1)return c[0];var s=function(){for(var l,$=0;$<c.length;$++)l=c[$].apply(null,arguments);return l};return s.$Invokes=c,s},CombineDelegates:function(c){for(var s=[],l=0;l<c.length;l++){var $=c[l];$&&("$Invokes"in $?s=s.concat($.$Invokes):s.push($))}return WebSharper.Runtime.CreateDelegate(s)},DelegateEqual:function(c,s){if(c===s)return!0;if(c==null||s==null)return!1;var l=c.$Invokes||[c],$=s.$Invokes||[s];if(l.length!=$.length)return!1;for(var d=0;d<l.length;d++){var b=l[d],U=$[d];if(!(b===U||"$Func"in b&&"$Func"in U&&b.$Func===U.$Func&&b.$Target==U.$Target))return!1}return!0},ThisFunc:function(c){return function(){var s=Array.prototype.slice.call(arguments);return s.unshift(this),c.apply(null,s)}},ThisFuncOut:function(c){return function(){var s=Array.prototype.slice.call(arguments);return c.apply(s.shift(),s)}},ParamsFunc:function(c,s){return function(){var l=Array.prototype.slice.call(arguments);return s.apply(null,l.slice(0,c).concat([l.slice(c)]))}},ParamsFuncOut:function(c,s){return function(){var l=Array.prototype.slice.call(arguments);return s.apply(null,l.slice(0,c).concat(l[c]))}},ThisParamsFunc:function(c,s){return function(){var l=Array.prototype.slice.call(arguments);return l.unshift(this),s.apply(null,l.slice(0,c+1).concat([l.slice(c+1)]))}},ThisParamsFuncOut:function(c,s){return function(){var l=Array.prototype.slice.call(arguments);return s.apply(l.shift(),l.slice(0,c).concat(l[c]))}},Curried:function(c,s,l){return l=l||[],function($){var d=l.concat([$===void 0?null:$]);return s==1?c.apply(null,d):s==2?function(b){return c.apply(null,d.concat([b===void 0?null:b]))}:WebSharper.Runtime.Curried(c,s-1,d)}},Curried2:function(c){return function(s){return function(l){return c(s,l)}}},Curried3:function(c){return function(s){return function(l){return function($){return c(s,l,$)}}}},UnionByType:function(c,s,l){for(var $=typeof s,d=0;d<c.length;d++){var b=c[d];if(typeof b=="number"){if(Array.isArray(s)&&(b==0||s.length==b))return{$:d,$0:s}}else if(b==$)return{$:d,$0:s}}if(!l)throw new Error("Type not expected for creating Choice value.")},MarkResizable:function(c){return Object.defineProperty(c,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),c},MarkReadOnly:function(c){return Object.defineProperty(c,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),c},ScriptBasePath:"./",ScriptPath:function(c,s){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":c+"/")+s},OnLoad:function(c){"load"in this||(this.load=[]),this.load.push(c)},Start:function(){function c(s){for(var l=0;l<s.length;l++)s[l]()}"load"in this&&(c(this.load),this.load=[])}}},p.WebSharper.Runtime.OnLoad(function(){p.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()}),p.ignore=function(){},p.id=function(c){return c},p.fst=function(c){return c[0]},p.snd=function(c){return c[1]},p.trd=function(c){return c[2]},p.console||(p.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);(function(p,c){c=p.Element.prototype,c.matches||(c.matches=c.msMatchesSelector||function(s){for(var l=(this.document||this.ownerDocument).querySelectorAll(s),$=0;l[$]&&l[$]!==e;++$);return!!l[$]}),c.closest||(c.closest=function(s){for(var l=this;l&&l.nodeType==1;){if(l.matches(s))return l;l=l.parentNode}return null})})(self);(function(){for(var p=0,c=["webkit","moz"],s=0;s<c.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[c[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[s]+"CancelAnimationFrame"]||window[c[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(l,$){var d=new Date().getTime(),b=Math.max(0,16-(d-p)),U=window.setTimeout(function(){l(d+b)},b);return p=d+b,U}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(l){clearTimeout(l)})})();(function(p){var c,s,l,$,d,b,U,Ne,Me,ke,Qe,ft,Pe,T,V,M,x,v,Tt,S,K,f,Xe,ye,E,Ie,ve,le,I,X,z,xe,P,fe,be,Oe,ue,ce,y,Ye,L,re,Z,D,Se,We,ge,se,Ve,w,pt,J,Ee,_e,Q,it,ht,Te,dt,$t,Le,de,qe,mt,Y,F,ee,He,Ke,yt,te,Ue,pe,et,ut,$e,Be,De,ot,oe,vt,ae,je,Ce,me,Re,ze,gt,Ct,wt,Ge,N,we,At,at;c=p.encrypt2=p.encrypt2||{},s=c.Client=c.Client||{},l=p.WebSharper=p.WebSharper||{},$=l.Obj=l.Obj||{},d=l.UI=l.UI||{},b=d.Var$1=d.Var$1||{},U=l.Operators=l.Operators||{},Ne=d.HtmlModule=d.HtmlModule||{},Me=Ne.attr=Ne.attr||{},ke=d.Var=d.Var||{},Qe=l.JavaScript=l.JavaScript||{},ft=Qe.JS=Qe.JS||{},Pe=d.ConcreteVar=d.ConcreteVar||{},T=d.Snap=d.Snap||{},V=l.List=l.List||{},M=l.Strings=l.Strings||{},x=d.AttrProxy=d.AttrProxy||{},v=d.Doc=d.Doc||{},Tt=Qe.Pervasives=Qe.Pervasives||{},S=l.Seq=l.Seq||{},K=V.T=V.T||{},f=l.Arrays=l.Arrays||{},Xe=l.Char=l.Char||{},ye=d.Client=d.Client||{},E=ye.Templates=ye.Templates||{},Ie=d.Abbrev=d.Abbrev||{},ve=Ie.Fresh=Ie.Fresh||{},le=p.StartupCode$encrypt2$Client=p.StartupCode$encrypt2$Client||{},I=d.Attrs=d.Attrs||{},X=d.DomUtility=d.DomUtility||{},z=d.View=d.View||{},xe=d.AttrModule=d.AttrModule||{},P=l.Enumerator=l.Enumerator||{},fe=P.T=P.T||{},be=p.Object,Oe=p.Node,ue=l.Collections=l.Collections||{},ce=ue.Dictionary=ue.Dictionary||{},y=l.Unchecked=l.Unchecked||{},Ye=l.Numeric=l.Numeric||{},L=d.BindVar=d.BindVar||{},re=p.StartupCode$WebSharper_UI$Templates=p.StartupCode$WebSharper_UI$Templates||{},Z=ue.HashSet=ue.HashSet||{},D=d.Docs=d.Docs||{},Se=p.StartupCode$WebSharper_UI$Abbrev=p.StartupCode$WebSharper_UI$Abbrev||{},We=l.Random=l.Random||{},ge=d.Elt=d.Elt||{},se=d.Array=d.Array||{},Ve=d.DocElemNode=d.DocElemNode||{},w=p.StartupCode$WebSharper_UI$Attr_Client=p.StartupCode$WebSharper_UI$Attr_Client||{},pt=ue.DictionaryUtil=ue.DictionaryUtil||{},J=E.Prepare=E.Prepare||{},Ee=l.Slice=l.Slice||{},_e=ue.KeyCollection=ue.KeyCollection||{},Q=d.An=d.An||{},it=ye.Settings=ye.Settings||{},ht=Ie.Mailbox=Ie.Mailbox||{},Te=d.Updates=d.Updates||{},dt=ye.Attrs=ye.Attrs||{},$t=dt.Dyn=dt.Dyn||{},Le=d.String=d.String||{},de=d.CheckedInput=d.CheckedInput||{},qe=ye.Docs=ye.Docs||{},mt=qe.RunState=qe.RunState||{},Y=qe.NodeSet=qe.NodeSet||{},F=l.Concurrency=l.Concurrency||{},ee=d.Anims=d.Anims||{},He=p.StartupCode$WebSharper_UI$Doc_Proxy=p.StartupCode$WebSharper_UI$Doc_Proxy||{},Ke=d.DynamicAttrNode=d.DynamicAttrNode||{},yt=l.DateUtil=l.DateUtil||{},te=p.StartupCode$WebSharper_UI$DomUtility=p.StartupCode$WebSharper_UI$DomUtility||{},Ue=p.StartupCode$WebSharper_UI$Animation=p.StartupCode$WebSharper_UI$Animation||{},pe=d.AppendList=d.AppendList||{},et=ue.HashSetUtil=ue.HashSetUtil||{},ut=p.Error,$e=l.KeyNotFoundException=l.KeyNotFoundException||{},Be=F.Scheduler=F.Scheduler||{},De=d.Easing=d.Easing||{},ot=F.AsyncBody=F.AsyncBody||{},oe=p.StartupCode$WebSharper_Main$Concurrency=p.StartupCode$WebSharper_Main$Concurrency||{},vt=F.CT=F.CT||{},ae=Ie.HashSet=Ie.HashSet||{},je=l.CancellationTokenSource=l.CancellationTokenSource||{},Ce=qe.DomNodes=qe.DomNodes||{},me=l.OperationCanceledException=l.OperationCanceledException||{},Re=l.Lazy=l.Lazy||{},ze=p.StartupCode$WebSharper_UI$AppendList=p.StartupCode$WebSharper_UI$AppendList||{},gt=l.Queue=l.Queue||{},Ct=l.LazyExtensionsProxy=l.LazyExtensionsProxy||{},wt=Ct.LazyRecord=Ct.LazyRecord||{},Ge=p.String,N=l&&l.Runtime,we=p.console,At=p.Math,at=p.Date,s.Main=function(){var t,n,r,i,u;t=b.Create$1(""),n=b.Create$1(""),r=b.Create$1(""),i=b.Create$1(s.displayKey()),u=v.Element("div",[x.Create("class","auth-container")],[v.Element("h1",[],[v.TextNode("Encryption App")]),v.Element("div",[x.Create("class","form-group")],[v.Element("h3",[],[v.TextNode("Encrypt a Message")]),v.Input([x.Create("class","form-control")],t),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){return n.Set(s.encrypt(t.Get()))}})],[v.TextNode("Encrypt")]),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){return n.Set(s.reverseEncrypt(t.Get()))}})],[v.TextNode("Reverse Encrypt")]),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){return n.Set(s.caseSensitiveEncrypt(t.Get()))}})],[v.TextNode("Case-Sensitive Encrypt")])]),v.Element("div",[x.Create("class","form-group")],[v.Element("h3",[],[v.TextNode("Encrypted Message")]),v.Input([x.Create("class","form-control"),x.Create("readonly","readonly")],n)]),v.Element("div",[x.Create("class","form-group")],[v.Element("h3",[],[v.TextNode("Decrypt the Message")]),v.Input([x.Create("class","form-control")],n),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){return r.Set(s.decrypt(n.Get()))}})],[v.TextNode("Decrypt")])]),v.Element("div",[x.Create("class","form-group")],[v.Element("h3",[],[v.TextNode("Decrypted Message")]),v.Input([x.Create("class","form-control"),x.Create("readonly","readonly")],r)]),v.Element("div",[x.Create("class","form-group")],[v.Element("h3",[],[v.TextNode("Encryption Key")]),v.Input([x.Create("class","form-control"),x.Create("readonly","readonly")],i),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){return i.Set(s.saveKey())}})],[v.TextNode("Save Key")]),v.Element("button",[x.Create("class","btn btn-default"),x.HandlerImpl("click",function(){return function(){var o;return o=self.prompt("Enter the encryption key:"),M.IsNullOrWhiteSpace(o)?null:(s.loadKey(o),i.Set(s.displayKey()))}})],[v.TextNode("Load Key")])])]),E.LoadLocalTemplates(""),v.RunById("main",u)},s.displayKey=function(){return M.concat("",V.map(p.id,s.keyList()))},s.encrypt=function(t){return M.concat("",f.map(p.id,f.ofSeq(S.map(function(n){var r;return r=S.findIndex(function(i){return n===i},s.charsList()),s.keyList().get_Item(r)},t))))},s.reverseEncrypt=function(t){return s.encrypt(f.ofSeq(S.rev(t)).join(""))},s.caseSensitiveEncrypt=function(t){return M.concat("",f.map(p.id,f.ofSeq(S.map(function(n){var r,i,u;return Xe.IsUpper(n)?(r=Ge.fromCharCode(n).toLowerCase().charCodeAt(0),i=S.findIndex(function(o){return r===o},s.charsList()),Ge.fromCharCode(s.keyList().get_Item(i)).toUpperCase().charCodeAt(0)):(u=S.findIndex(function(o){return n===o},s.charsList()),s.keyList().get_Item(u))},t))))},s.decrypt=function(t){return M.concat("",f.map(p.id,f.ofSeq(S.map(function(n){var r;return r=S.findIndex(function(i){return n===i},s.keyList()),s.charsList().get_Item(r)},t))))},s.saveKey=function(){return s.displayKey()},s.loadKey=function(t){var n;function r(i,u){return function(o){return[V.append(i,V.ofArray([o[0]])),V.append(u,V.ofArray([o[1]]))]}}n=S.fold(function(i,u){return function(o){return r(o[0],o[1])}(i)(u)},[K.Empty,K.Empty],V.mapi(function(i,u){return[s.charsList().get_Item(i),u]},V.ofSeq(S.map(p.id,t)))),s.set_charsList(n[0]),s.set_keyList(n[1])},s.keyList=function(){return le.$cctor(),le.keyList},s.charsList=function(){return le.$cctor(),le.charsList},s.set_charsList=function(t){le.$cctor(),le.charsList=t},s.set_keyList=function(t){le.$cctor(),le.keyList=t},s.shuffle=function(t){var n,r,i,u,o,a;for(n=new We.New,r=f.ofList(t),i=0,u=f.length(r)-1;i<=u;i++)o=n.Next$1(f.length(r)),a=f.get(r,i),f.set(r,i,f.get(r,o)),f.set(r,o,a);return V.ofArray(r)},$=l.Obj=N.Class({Equals:function(t){return this===t},GetHashCode:function(){return-1}},null,$),$.New=N.Ctor(function(){},$),b=d.Var$1=N.Class({},$,b),b.Create$1=function(t){return new Pe.New(!1,T.New({$:2,$0:t,$1:[]}),t)},U.FailWith=function(t){throw new ut(t)},U.range=function(t,n){var r;return r=1+n-t,r<=0?[]:S.init(r,function(i){return i+t})},U.KeyValue=function(t){return[t.K,t.V]},Me=Ne.attr=N.Class({},$,Me),ke=d.Var=N.Class({},$,ke),ke.New=N.Ctor(function(){$.New.call(this)},ke),ft.GetFieldValues=function(t){var n;n=[];for(var r in t)n.push(t[r]);return n},Pe=d.ConcreteVar=N.Class({Set:function(t){this.isConst?function(n){return n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal")}(function(n){we.log(n)}):(T.Obsolete(this.snap),this.current=t,this.snap=T.New({$:2,$0:t,$1:[]}))},Get:function(){return this.current},get_View:function(){return this.view},UpdateMaybe:function(t){var n;n=t(this.Get()),n!=null&&n.$==1&&this.Set(n.$0)}},ke,Pe),Pe.New=N.Ctor(function(t,n,r){var i;i=this,ke.New.call(this),this.isConst=t,this.current=r,this.snap=n,this.view=function(){return i.snap},this.id=ve.Int()},Pe),T.WhenRun=function(t,n,r){var i;i=t.s,i==null?r():i!=null&&i.$==2?(i.$1.push(r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),i.$1.push(r)):n(i.$0)},T.Copy=function(t){var n,r,i;return n=t.s,n==null?t:n!=null&&n.$==2?(r=T.New({$:2,$0:n.$0,$1:[]}),T.WhenObsolete(t,r),r):n!=null&&n.$==3?(i=T.New({$:3,$0:[],$1:[]}),T.When(t,function(u){T.MarkDone(i,t,u)},i),i):t},T.WhenObsoleteRun=function(t,n){var r;r=t.s,r==null?n():(r!=null&&r.$==2||r!=null&&r.$==3)&&r.$1.push(n)},T.Map2Unit=function(t,n){var r,i,u;function o(){var a,h,g;a=u.s,!(a!=null&&a.$==0||a!=null&&a.$==2)&&(h=T.ValueAndForever(t),g=T.ValueAndForever(n),h!=null&&h.$==1&&g!=null&&g.$==1&&(h.$0[1]&&g.$0[1]?T.MarkForever(u,null):T.MarkReady(u,null)))}return r=t.s,i=n.s,r!=null&&r.$==0?i!=null&&i.$==0?T.New({$:0,$0:null}):n:i!=null&&i.$==0?t:(u=T.New({$:3,$0:[],$1:[]}),T.When(t,o,u),T.When(n,o,u),u)},T.WhenObsolete=function(t,n){var r;r=t.s,r==null?T.Obsolete(n):(r!=null&&r.$==2||r!=null&&r.$==3)&&T.EnqueueSafe(r.$1,n)},T.When=function(t,n,r){var i;i=t.s,i==null?T.Obsolete(r):i!=null&&i.$==2?(T.EnqueueSafe(i.$1,r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),T.EnqueueSafe(i.$1,r)):n(i.$0)},T.MarkDone=function(t,n,r){var i;i=n.s,i!=null&&i.$==0?T.MarkForever(t,r):T.MarkReady(t,r)},T.ValueAndForever=function(t){var n;return n=t.s,n!=null&&n.$==0?{$:1,$0:[n.$0,!0]}:n!=null&&n.$==2?{$:1,$0:[n.$0,!1]}:null},T.MarkForever=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:0,$0:n},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},T.MarkReady=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:2,$0:n,$1:r.$1},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},T.Map=function(t,n){var r,i;return r=n.s,r!=null&&r.$==0?T.New({$:0,$0:t(r.$0)}):(i=T.New({$:3,$0:[],$1:[]}),T.When(n,function(u){T.MarkDone(i,n,t(u))},i),i)},T.EnqueueSafe=function(t,n){var r,i,u,o;if(t.push(n),t.length%20===0)for(r=t.slice(0),gt.Clear(t),i=0,u=f.length(r)-1;i<=u;i++)o=f.get(r,i),typeof o=="object"?function(a){a.s&&t.push(a)}(o):function(a){t.push(a)}(o)},V.map=function(t,n){var r,i,u,o,a;if(n.$==0)return n;for(o=new K({$:1}),r=o,i=n,u=!0;u;)r.$0=t(i.$0),i=i.$1,i.$==0?u=!1:r=(a=new K({$:1}),r.$1=a,a);return r.$1=K.Empty,o},V.ofSeq=function(t){var n,r,i,u,o,a;if(t instanceof K)return t;if(t instanceof p.Array)return V.ofArray(t);n=P.Get(t);try{if(i=n.MoveNext(),!i)r=K.Empty;else{for(o=new K({$:1}),u=o;i;)u.$0=n.Current(),n.MoveNext()?u=(a=new K({$:1}),u.$1=a,a):i=!1;u.$1=K.Empty,r=o}return r}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},V.mapi=function(t,n){var r,i,u,o,a,h;if(n.$==0)return n;for(a=new K({$:1}),r=a,i=n,u=0,o=!0;o;)r.$0=t(u,i.$0),i=i.$1,i.$==0?o=!1:(r=(h=new K({$:1}),r.$1=h,h),u=u+1);return r.$1=K.Empty,a},V.ofArray=function(t){var n,r,i;for(n=K.Empty,r=f.length(t)-1,i=0;r>=i;r--)n=new K({$:1,$0:f.get(t,r),$1:n});return n},V.append=function(t,n){var r,i,u,o,a;if(t.$==0)return n;if(n.$==0)return t;for(o=new K({$:1}),r=o,i=t,u=!0;u;)r.$0=i.$0,i=i.$1,i.$==0?u=!1:r=(a=new K({$:1}),r.$1=a,a);return r.$1=n,o},V.head=function(t){return t.$==1?t.$0:V.listEmpty()},V.tail=function(t){return t.$==1?t.$1:V.listEmpty()},V.listEmpty=function(){return U.FailWith("The input list was empty.")},M.concat=function(t,n){return f.ofSeq(n).join(t)},M.IsNullOrWhiteSpace=function(t){return t==null||new p.RegExp("^\\s*$").test(t)},M.SplitChars=function(t,n,r){return M.Split(t,new p.RegExp("["+M.RegexEscape(n.join(""))+"]"),r)},M.StartsWith=function(t,n){return t.substring(0,n.length)==n},M.forall=function(t,n){return S.forall(t,M.protect(n))},M.Split=function(t,n,r){return r===1?f.filter(function(i){return i!==""},M.SplitWith(t,n)):M.SplitWith(t,n)},M.RegexEscape=function(t){return t.replace(new p.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")},M.protect=function(t){return t??""},M.SplitWith=function(t,n){return t.split(n)},x=d.AttrProxy=N.Class({},null,x),x.Create=function(t,n){return I.Static(function(r){r.setAttribute(t,n)})},x.HandlerImpl=function(t,n){return I.Static(function(r){r.addEventListener(t,function(i){return n(r)(i)},!1)})},x.Concat=function(t){var n;return n=se.ofSeqNonCopying(t),se.TreeReduce(I.EmptyAttr(),x.Append,n)},x.Append=function(t,n){return I.AppendTree(t,n)},v=d.Doc=N.Class({},$,v),v.TextNode=function(t){return v.Mk({$:5,$0:self.document.createTextNode(t)},z.Const())},v.Input=function(t,n){return v.InputInternal("input",function(){return S.append(t,[xe.Value(n)])})},v.RunById=function(t,n){var r;r=self.document.getElementById(t),y.Equals(r,null)?U.FailWith("invalid id: "+t):v.Run(r,n)},v.Element=function(t,n,r){var i,u;return i=x.Concat(n),u=v.Concat(r),ge.New(self.document.createElement(t),i,u)},v.Mk=function(t,n){return new v.New(t,n)},v.InputInternal=function(t,n){var r;return r=self.document.createElement(t),ge.New(r,x.Concat(n(r)),v.get_Empty())},v.Run=function(t,n){D.LinkElement(t,n.docNode),v.RunInPlace(!1,t,n)},v.Concat=function(t){var n;return n=se.ofSeqNonCopying(t),se.TreeReduce(v.get_Empty(),v.Append,n)},v.get_Empty=function(){return v.Mk(null,z.Const())},v.RunInPlace=function(t,n,r){var i;i=D.CreateRunState(n,r.docNode),z.Sink(Q.get_UseAnimations()||it.BatchUpdatesEnabled()?ht.StartProcessor(D.PerformAnimatedUpdate(t,i,r.docNode)):function(){D.PerformSyncUpdate(t,i,r.docNode)},r.updates)},v.Append=function(t,n){return v.Mk({$:0,$0:t.docNode,$1:n.docNode},z.Map2Unit(t.updates,n.updates))},v.New=N.Ctor(function(t,n){$.New.call(this),this.docNode=t,this.updates=n},v),Tt.NewFromSeq=function(t){var n,r,i;n={},r=P.Get(t);try{for(;r.MoveNext();)i=r.Current(),n[i[0]]=i[1]}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}return n},S.map=function(t,n){return{GetEnumerator:function(){var r;return r=P.Get(n),new fe.New(null,null,function(i){return r.MoveNext()&&(i.c=t(r.Current()),!0)},function(){r.Dispose()})}}},S.rev=function(t){return S.delay(function(){return f.ofSeq(t).slice().reverse()})},S.append=function(t,n){return{GetEnumerator:function(){var r,i;return r=P.Get(t),i=[!0],new fe.New(r,null,function(u){var o;return u.s.MoveNext()?(u.c=u.s.Current(),!0):(o=u.s,y.Equals(o,null)||o.Dispose(),u.s=null,i[0]&&(i[0]=!1,u.s=P.Get(n),u.s.MoveNext()?(u.c=u.s.Current(),!0):(u.s.Dispose(),u.s=null,!1)))},function(u){var o;o=u.s,y.Equals(o,null)||o.Dispose()})}}},S.findIndex=function(t,n){var r;return r=S.tryFindIndex(t,n),r==null?U.FailWith("KeyNotFoundException"):r.$0},S.delay=function(t){return{GetEnumerator:function(){return P.Get(t())}}},S.fold=function(t,n,r){var i,u;i=n,u=P.Get(r);try{for(;u.MoveNext();)i=t(i,u.Current());return i}finally{typeof u=="object"&&"Dispose"in u&&u.Dispose()}},S.tryFindIndex=function(t,n){var r,i,u;r=P.Get(n);try{for(i=!0,u=0;i&&r.MoveNext();)t(r.Current())?i=!1:u=u+1;return i?null:{$:1,$0:u}}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},S.head=function(t){var n;n=P.Get(t);try{return n.MoveNext()?n.Current():S.insufficient()}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},S.init=function(t,n){return S.take(t,S.initInfinite(n))},S.nth=function(t,n){var r,i;t<0&&U.FailWith("negative index requested"),r=-1,i=P.Get(n);try{for(;r<t;)i.MoveNext()||S.insufficient(),r=r+1;return i.Current()}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},S.take=function(t,n){return t<0&&S.nonNegative(),{GetEnumerator:function(){var r;return r=[P.Get(n)],new fe.New(0,null,function(i){var u;return i.s=i.s+1,i.s>t?!1:(u=r[0],y.Equals(u,null)?S.insufficient():u.MoveNext()?(i.c=u.Current(),i.s===t&&(u.Dispose(),r[0]=null),!0):(u.Dispose(),r[0]=null,S.insufficient()))},function(){var i;i=r[0],y.Equals(i,null)||i.Dispose()})}}},S.initInfinite=function(t){return{GetEnumerator:function(){return new fe.New(0,null,function(n){return n.c=t(n.s),n.s=n.s+1,!0},void 0)}}},S.iter=function(t,n){var r;r=P.Get(n);try{for(;r.MoveNext();)t(r.Current())}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},S.forall=function(t,n){return!S.exists(function(r){return!t(r)},n)},S.exists=function(t,n){var r,i;r=P.Get(n);try{for(i=!1;!i&&r.MoveNext();)i=t(r.Current());return i}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},S.max=function(t){var n,r,i;n=P.Get(t);try{for(n.MoveNext()||S.seqEmpty(),r=n.Current();n.MoveNext();)i=n.Current(),y.Compare(i,r)===1&&(r=i);return r}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},S.seqEmpty=function(){return U.FailWith("The input sequence was empty.")},K=V.T=N.Class({get_Item:function(t){return S.nth(t,this)},GetEnumerator:function(){return new fe.New(this,null,function(t){var n;return n=t.s,n.$==0?!1:(t.c=n.$0,t.s=n.$1,!0)},void 0)}},null,K),K.Empty=new K({$:0}),f.map=function(t,n){var r,i,u;for(r=new p.Array(n.length),i=0,u=n.length-1;i<=u;i++)r[i]=t(n[i]);return r},f.ofSeq=function(t){var n,r;if(t instanceof p.Array)return t.slice();if(t instanceof K)return f.ofList(t);n=[],r=P.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},f.ofList=function(t){var n,r;for(r=[],n=t;n.$!=0;)r.push(V.head(n)),n=V.tail(n);return r},f.exists=function(t,n){var r,i,u;for(r=!1,i=0,u=f.length(n);!r&&i<u;)t(n[i])?r=!0:i=i+1;return r},f.tryPick=function(t,n){var r,i,u;for(r=null,i=0;i<n.length&&r==null;)u=t(n[i]),u!=null&&u.$==1&&(r=u),i=i+1;return r},f.tryFindIndex=function(t,n){var r,i;for(r=null,i=0;i<n.length&&r==null;)t(n[i])&&(r={$:1,$0:i}),i=i+1;return r},f.filter=function(t,n){var r,i,u;for(r=[],i=0,u=n.length-1;i<=u;i++)t(n[i])&&r.push(n[i]);return r},f.iter=function(t,n){var r,i;for(r=0,i=n.length-1;r<=i;r++)t(n[r])},f.foldBack=function(t,n,r){var i,u,o,a;for(i=r,u=n.length,o=1,a=u;o<=a;o++)i=t(n[u-o],i);return i},f.concat=function(t){return p.Array.prototype.concat.apply([],f.ofSeq(t))},f.pick=function(t,n){var r;return r=f.tryPick(t,n),r==null?U.FailWith("KeyNotFoundException"):r.$0},f.choose=function(t,n){var r,i,u,o;for(r=[],i=0,u=n.length-1;i<=u;i++)o=t(n[i]),o==null||r.push(o.$0);return r},f.create=function(t,n){var r,i,u;for(r=new p.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n;return r},f.init=function(t,n){var r,i,u;for(t<0&&U.FailWith("Negative size given."),r=new p.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n(i);return r},f.forall=function(t,n){var r,i,u;for(r=!0,i=0,u=f.length(n);r&&i<u;)t(n[i])?i=i+1:r=!1;return r},Xe.IsUpper=function(t){return t>="A"&&t<="Z"},Xe.IsWhiteSpace=function(t){return t.match(new p.RegExp("\\s"))!==null},E.LoadLocalTemplates=function(t){E.LocalTemplatesLoaded()||(E.set_LocalTemplatesLoaded(!0),E.LoadNestedTemplates(self.document.body,"")),E.LoadedTemplates().set_Item(t,E.LoadedTemplateFile(""))},E.LocalTemplatesLoaded=function(){return re.$cctor(),re.LocalTemplatesLoaded},E.set_LocalTemplatesLoaded=function(t){re.$cctor(),re.LocalTemplatesLoaded=t},E.LoadNestedTemplates=function(t,n){var r,i,u,o,a,h,g,R,W,H,q,k,m,C,A,O,_,ne,B,G,ie;function he(j){var Ae,Fe;r.ContainsKey(j)||(Ae=(Fe=null,[i.TryGetValue(j,{get:function(){return Fe},set:function(Ze){Fe=Ze}}),Fe]),Ae[0]?(ie.SAdd(j),i.RemoveKey(j),E.PrepareTemplateStrict(n,{$:1,$0:j},Ae[1],{$:1,$0:he})):we.warn(ie.Contains(j)?"Encountered loop when instantiating "+j:"Local template does not exist: "+j))}for(r=E.LoadedTemplateFile(n),i=new ce.New$5,u=t.querySelectorAll("[ws-template]"),o=0,a=u.length-1;o<=a;o++)h=u[o],g=h.getAttribute("ws-template").toLowerCase(),h.removeAttribute("ws-template"),i.set_Item(g,E.FakeRootSingle(h));for(R=t.querySelectorAll("[ws-children-template]"),W=0,H=R.length-1;W<=H;W++)q=R[W],k=q.getAttribute("ws-children-template").toLowerCase(),q.removeAttribute("ws-children-template"),i.set_Item(k,E.FakeRoot(q));for(m=t.querySelectorAll("template[id]"),C=0,A=m.length-1;C<=A;C++)O=m[C],i.set_Item(O.getAttribute("id").toLowerCase(),E.FakeRootFromHTMLTemplate(O));for(_=t.querySelectorAll("template[name]"),ne=0,B=_.length-1;ne<=B;ne++)G=_[ne],i.set_Item(G.getAttribute("name").toLowerCase(),E.FakeRootFromHTMLTemplate(G));for(ie=new Z.New$3;i.count>0;)he(S.head(i.Keys()))},E.LoadedTemplates=function(){return re.$cctor(),re.LoadedTemplates},E.LoadedTemplateFile=function(t){var n,r,i;return n=(r=null,[E.LoadedTemplates().TryGetValue(t,{get:function(){return r},set:function(u){r=u}}),r]),n[0]?n[1]:(i=new ce.New$5,E.LoadedTemplates().set_Item(t,i),i)},E.FakeRootSingle=function(t){var n,r,i,u;return t.removeAttribute("ws-template"),n=t.getAttribute("ws-replace"),n==null||(t.removeAttribute("ws-replace"),r=t.parentNode,y.Equals(r,null)||(i=self.document.createElement(t.tagName),i.setAttribute("ws-replace",n),r.replaceChild(i,t))),u=self.document.createElement("div"),u.appendChild(t),u},E.FakeRoot=function(t){var n;for(n=self.document.createElement("div");t.hasChildNodes();)n.appendChild(t.firstChild);return n},E.FakeRootFromHTMLTemplate=function(t){var n,r,i,u;for(n=self.document.createElement("div"),r=t.content,i=0,u=r.childNodes.length-1;i<=u;i++)n.appendChild(r.childNodes[i].cloneNode(!0));return n},E.PrepareTemplateStrict=function(t,n,r,i){var u,o;function a(q,k){var m,C,A,O,_,ne,B,G,ie,he,j,Ae,Fe,Ze,tt,Dt,nt,Nt,lt,Ft,St,Et,ct,kt,rt;function It(Je){}for(;;)switch(q){case 0:if(k!==null)m=k.nextSibling,y.Equals(k.nodeType,Oe.TEXT_NODE)?J.convertTextNode(k):y.Equals(k.nodeType,Oe.ELEMENT_NODE)&&g(k),k=m;else return null;break;case 1:if(_=Ee.string(k.nodeName,{$:1,$0:3},null).toLowerCase(),ne=(C=_.indexOf("."),C===-1?[t,_]:[Ee.string(_,null,{$:1,$0:C-1}),Ee.string(_,{$:1,$0:C+1},null)]),B=ne[1],G=ne[0],G!=""&&!E.LoadedTemplates().ContainsKey(G))return J.failNotLoaded(B);if(G==""&&i!=null&&i.$0(B),ie=E.LoadedTemplates().Item(G),ie.ContainsKey(B)){for(he=ie.Item(B),j=he.cloneNode(!0),Ae=new Z.New$3,Fe=new ce.New$5,Ze=k.attributes,tt=0,Dt=Ze.length-1;tt<=Dt;tt++)nt=Ze.item(tt).name.toLowerCase(),Fe.set_Item(nt,(Nt=Ze.item(tt).nodeValue,Nt==""?nt:Nt.toLowerCase())),Ae.SAdd(nt)||we.warn("Hole mapped twice",nt);for(lt=0,Ft=k.childNodes.length-1;lt<=Ft;lt++)St=k.childNodes[lt],y.Equals(St.nodeType,Oe.ELEMENT_NODE)&&(Ae.SAdd(St.nodeName.toLowerCase())||we.warn("Hole filled twice",B));if(Et=k.childNodes.length===1&&y.Equals(k.firstChild.nodeType,Oe.TEXT_NODE),Et&&(A=J.fillTextHole(j,k.firstChild.textContent,B),function(Je){return function(st){st!=null&&Je(st.$0)}}((O=function(Je){return function(st){return Je.SAdd(st)}}(Ae),function(Je){return O(Je),void 0}))(A)),J.removeHolesExcept(j,Ae),!Et)for(ct=0,kt=k.childNodes.length-1;ct<=kt;ct++)rt=k.childNodes[ct],y.Equals(rt.nodeType,Oe.ELEMENT_NODE)&&(rt.hasAttributes()?J.fillInstanceAttrs(j,rt):h(j,rt));J.mapHoles(j,Fe),J.fill(j,k.parentNode,k),k.parentNode.removeChild(k);return}else return J.failNotLoaded(B)}}function h(q,k){var m,C,A,O;function _(ne,B){var G;if(A=="title"&&k.hasChildNodes())for(G=X.ParseHTMLIntoFakeRoot(k.textContent),k.removeChild(k.firstChild);G.hasChildNodes();)k.appendChild(G.firstChild);return g(k),J.fill(k,ne,B)}if(A=k.nodeName.toLowerCase(),E.foreachNotPreserved(q,"[ws-attr-holes]",function(ne){var B,G,ie,he,j;for(B=M.SplitChars(ne.getAttribute("ws-attr-holes"),[" "],1),G=0,ie=B.length-1;G<=ie;G++)he=f.get(B,G),ne.setAttribute(he,(j=new p.RegExp("\\${"+A+"}","ig"),ne.getAttribute(he).replace(j,k.textContent)))}),O=q.querySelector("[ws-hole="+A+"]"),y.Equals(O,null))return m=q.querySelector("[ws-replace="+A+"]"),y.Equals(m,null)?(C=q.querySelector("slot[name="+A+"]"),q.tagName.toLowerCase()=="template"?(_(C.parentNode,C),void C.parentNode.removeChild(C)):null):(_(m.parentNode,m),void m.parentNode.removeChild(m));for(;O.hasChildNodes();)O.removeChild(O.lastChild);return O.removeAttribute("ws-hole"),_(O,null)}function g(q){q.hasAttribute("ws-preserve")||(M.StartsWith(q.nodeName.toLowerCase(),"ws-")?W(q):(J.convertAttrs(q),R(q.firstChild)))}function R(q){return a(0,q)}function W(q){return a(1,q)}function H(q){for(var k,m,C,A,O,_,ne,B,G,ie,he,j;;)if(k=q.querySelector("[ws-template]"),y.Equals(k,null))if(m=q.querySelector("[ws-children-template]"),y.Equals(m,null)){for(C=q.querySelectorAll("template[id]"),A=1,O=C.length-1;A<=O;A++)_=C[A],u.Contains(_)||(E.PrepareTemplateStrict(t,{$:1,$0:_.getAttribute("id")},_,null),u.SAdd(_));for(ne=q.querySelectorAll("template[name]"),B=1,G=ne.length-1;B<=G;B++)ie=ne[B],u.Contains(ie)||(E.PrepareTemplateStrict(t,{$:1,$0:ie.getAttribute("name")},ie,null),u.SAdd(ie));return null}else he=m.getAttribute("ws-children-template"),m.removeAttribute("ws-children-template"),E.PrepareTemplateStrict(t,{$:1,$0:he},m,null),q=q;else j=k.getAttribute("ws-template"),E.PrepareSingleTemplate(t,{$:1,$0:j},k)(null),q=q}u=new Z.New$3,o=(n==null?"":n.$0).toLowerCase(),E.LoadedTemplateFile(t).set_Item(o,r),r.hasChildNodes()&&(H(r),R(r.firstChild))},E.foreachNotPreserved=function(t,n,r){X.IterSelector(t,n,function(i){i.closest("[ws-preserve]")==null&&r(i)})},E.PrepareSingleTemplate=function(t,n,r){var i;return i=E.FakeRootSingle(r),function(u){E.PrepareTemplateStrict(t,n,i,u)}},E.TextHoleRE=function(){return re.$cctor(),re.TextHoleRE},ve.Int=function(){return ve.set_counter(ve.counter()+1),ve.counter()},ve.set_counter=function(t){Se.$cctor(),Se.counter=t},ve.counter=function(){return Se.$cctor(),Se.counter},le.$cctor=function(){le.$cctor=p.ignore,le.charsList=V.ofSeq(S.delay(function(){return S.map(Ge.fromCharCode,U.range(32,126))})),le.keyList=s.shuffle(s.charsList())},I.Static=function(t){return new x({$:3,$0:t})},I.Updates=function(t){return se.MapTreeReduce(function(n){return n.NChanged()},z.Const(),z.Map2Unit,t.DynNodes)},I.AppendTree=function(t,n){var r;return t===null?n:n===null?t:(r=new x({$:2,$0:t,$1:n}),I.SetFlags(r,I.Flags(t)|I.Flags(n)),r)},I.EmptyAttr=function(){return w.$cctor(),w.EmptyAttr},I.Dynamic=function(t,n){return new x({$:1,$0:new Ke.New(t,n)})},I.Insert=function(t,n){var r,i,u;function o(a){for(var h,g;;)if(a!==null){if(a!=null&&a.$==1)return r.push(a.$0);if(a!=null&&a.$==2)h=a.$1,g=a.$0,o(g),a=h;else return a!=null&&a.$==3?a.$0(t):a!=null&&a.$==4?i.push(a.$0):null}else return null}return r=[],i=[],o(n),u=r.slice(0),$t.New(t,I.Flags(n),u,i.length===0?null:{$:1,$0:function(a){S.iter(function(h){h(a)},i)}})},I.SetFlags=function(t,n){t.flags=n},I.Flags=function(t){return t!==null&&t.hasOwnProperty("flags")?t.flags:0},I.HasExitAnim=function(t){var n;return n=2,(t.DynFlags&n)===n},I.GetExitAnim=function(t){return I.GetAnim(t,function(n,r){return n.NGetExitAnim(r)})},I.HasEnterAnim=function(t){var n;return n=1,(t.DynFlags&n)===n},I.GetEnterAnim=function(t){return I.GetAnim(t,function(n,r){return n.NGetEnterAnim(r)})},I.HasChangeAnim=function(t){var n;return n=4,(t.DynFlags&n)===n},I.GetChangeAnim=function(t){return I.GetAnim(t,function(n,r){return n.NGetChangeAnim(r)})},I.GetAnim=function(t,n){return Q.Concat(f.map(function(r){return n(r,t.DynElem)},t.DynNodes))},I.Sync=function(t,n){f.iter(function(r){r.NSync(t)},n.DynNodes)},X.ParseHTMLIntoFakeRoot=function(t){var n,r,i,u,o;function a(h,g){for(var R;;){if(g===0)return h;R=g,h=h.lastChild,g=R-1}}return n=self.document.createElement("div"),X.rhtml().test(t)?(r=(i=X.rtagName().exec(t),y.Equals(i,null)?"":f.get(i,1).toLowerCase()),u=(o=X.wrapMap()[r],o||X.defaultWrap()),n.innerHTML=u[1]+t.replace(X.rxhtmlTag(),"<$1></$2>")+u[2],a(n,u[0])):(n.appendChild(self.document.createTextNode(t)),n)},X.rhtml=function(){return te.$cctor(),te.rhtml},X.wrapMap=function(){return te.$cctor(),te.wrapMap},X.defaultWrap=function(){return te.$cctor(),te.defaultWrap},X.rxhtmlTag=function(){return te.$cctor(),te.rxhtmlTag},X.rtagName=function(){return te.$cctor(),te.rtagName},X.IterSelector=function(t,n,r){var i,u,o;for(i=t.querySelectorAll(n),u=0,o=i.length-1;u<=o;u++)r(i[u])},X.InsertAt=function(t,n,r){var i;r.parentNode===t&&n===(i=r.nextSibling,y.Equals(i,null)?null:i)||t.insertBefore(r,n)},X.RemoveNode=function(t,n){n.parentNode===t&&t.removeChild(n)},z.Const=function(t){var n;return n=T.New({$:0,$0:t}),function(){return n}},z.Sink=function(t,n){function r(){T.WhenRun(n(),t,function(){F.scheduler().Fork(r)})}F.scheduler().Fork(r)},z.Map2Unit=function(t,n){return z.CreateLazy(function(){return T.Map2Unit(t(),n())})},z.CreateLazy=function(t){var n;return n={c:null,o:t},function(){var r,i;return r=n.c,r===null&&(r=n.o(),n.c=r,i=r.s,i!=null&&i.$==0?n.o=null:T.WhenObsoleteRun(r,function(){n.c=null})),r}},z.Map=function(t,n){return z.CreateLazy(function(){return T.Map(t,n())})},xe.Value=function(t){return xe.ValueWith(L.StringApply(),t)},xe.ValueWith=function(t,n){var r;return r=t(n),x.Append(I.Static(r[0]),xe.DynamicCustom(r[1],r[2]))},xe.DynamicCustom=function(t,n){return I.Dynamic(n,t)},P.Get=function(t){return t instanceof p.Array?P.ArrayEnumerator(t):y.Equals(typeof t,"string")?P.StringEnumerator(t):t.GetEnumerator()},P.ArrayEnumerator=function(t){return new fe.New(0,null,function(n){var r;return r=n.s,r<f.length(t)&&(n.c=f.get(t,r),n.s=r+1,!0)},void 0)},P.StringEnumerator=function(t){return new fe.New(0,null,function(n){var r;return r=n.s,r<t.length&&(n.c=t[r],n.s=r+1,!0)},void 0)},P.Get0=function(t){return t instanceof p.Array?P.ArrayEnumerator(t):y.Equals(typeof t,"string")?P.StringEnumerator(t):"GetEnumerator0"in t?t.GetEnumerator0():t.GetEnumerator()},fe=P.T=N.Class({Dispose:function(){this.d&&this.d(this)},MoveNext:function(){var t;return t=this.n(this),this.e=t?1:2,t},Current:function(){return this.e===1?this.c:this.e===0?U.FailWith("Enumeration has not started. Call MoveNext."):U.FailWith("Enumeration already finished.")}},$,fe),fe.New=N.Ctor(function(t,n,r,i){$.New.call(this),this.s=t,this.c=n,this.n=r,this.d=i,this.e=0},fe),f.get=function(t,n){return f.checkBounds(t,n),t[n]},f.length=function(t){return t.dims===2?t.length*t.length:t.length},f.checkBounds=function(t,n){(n<0||n>=t.length)&&U.FailWith("Index was outside the bounds of the array.")},f.set=function(t,n,r){f.checkBounds(t,n),t[n]=r},ce=ue.Dictionary=N.Class({set_Item:function(t,n){this.set(t,n)},ContainsKey:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?!1:f.exists(function(i){return n.equals.apply(null,[U.KeyValue(i)[0],t])},r)},TryGetValue:function(t,n){var r,i,u;return r=this,i=this.data[this.hash(t)],i==null?!1:(u=f.tryPick(function(o){var a;return a=U.KeyValue(o),r.equals.apply(null,[a[0],t])?{$:1,$0:a[1]}:null},i),u!=null&&u.$==1&&(n.set(u.$0),!0))},RemoveKey:function(t){return this.remove(t)},Keys:function(){return new _e.New(this)},set:function(t,n){var r,i,u,o;r=this,i=this.hash(t),u=this.data[i],u==null?(this.count=this.count+1,this.data[i]=new p.Array({K:t,V:n})):(o=f.tryFindIndex(function(a){return r.equals.apply(null,[U.KeyValue(a)[0],t])},u),o==null?(this.count=this.count+1,u.push({K:t,V:n})):u[o.$0]={K:t,V:n})},remove:function(t){var n,r,i,u;return n=this,r=this.hash(t),i=this.data[r],i==null?!1:(u=f.filter(function(o){return!n.equals.apply(null,[U.KeyValue(o)[0],t])},i),f.length(u)<i.length&&(this.count=this.count-1,this.data[r]=u,!0))},Item:function(t){return this.get(t)},GetEnumerator:function(){return P.Get0(f.concat(ft.GetFieldValues(this.data)))},get:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?pt.notPresent():f.pick(function(i){var u;return u=U.KeyValue(i),n.equals.apply(null,[u[0],t])?{$:1,$0:u[1]}:null},r)}},$,ce),ce.New$5=N.Ctor(function(){ce.New$6.call(this,[],y.Equals,y.Hash)},ce),ce.New$6=N.Ctor(function(t,n,r){var i,u;$.New.call(this),this.equals=n,this.hash=r,this.count=0,this.data=[],i=P.Get(t);try{for(;i.MoveNext();)u=i.Current(),this.set(u.K,u.V)}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},ce),y.Equals=function(t,n){var r,i;if(t===n)return!0;if(r=typeof t,r=="object"){if(t==null||n===null||n===void 0||!y.Equals(typeof n,"object"))return!1;if("Equals"in t)return t.Equals(n);if("Equals"in n)return!1;if(t instanceof p.Array&&n instanceof p.Array)return y.arrayEquals(t,n);if(t instanceof p.Date&&n instanceof p.Date)return y.dateEquals(t,n);i=[!0];for(var u in t)if(function(a){return i[0]=!t.hasOwnProperty(a)||n.hasOwnProperty(a)&&y.Equals(t[a],n[a]),!i[0]}(u))break;if(i[0]){for(var o in n)if(function(a){return i[0]=!n.hasOwnProperty(a)||t.hasOwnProperty(a),!i[0]}(o))break}return i[0]}else return r=="function"&&("$Func"in t?t.$Func===n.$Func&&t.$Target===n.$Target:"$Invokes"in t&&"$Invokes"in n&&y.arrayEquals(t.$Invokes,n.$Invokes))},y.arrayEquals=function(t,n){var r,i;if(f.length(t)===f.length(n)){for(r=!0,i=0;r&&i<f.length(t);)y.Equals(f.get(t,i),f.get(n,i))||(r=!1),i=i+1;return r}else return!1},y.dateEquals=function(t,n){return t.getTime()===n.getTime()},y.Hash=function(t){var n;return n=typeof t,n=="function"?0:n=="boolean"?t?1:0:n=="number"?t:n=="string"?y.hashString(t):n=="object"?t==null?0:t instanceof p.Array?y.hashArray(t):y.hashObject(t):0},y.hashString=function(t){var n,r,i;if(t===null)return 0;for(n=5381,r=0,i=t.length-1;r<=i;r++)n=y.hashMix(n,t[r].charCodeAt());return n},y.hashArray=function(t){var n,r,i;for(n=-34948909,r=0,i=f.length(t)-1;r<=i;r++)n=y.hashMix(n,y.Hash(f.get(t,r)));return n},y.hashObject=function(t){var n;if("GetHashCode"in t)return t.GetHashCode();n=[0];for(var r in t)(function(i){return n[0]=y.hashMix(y.hashMix(n[0],y.hashString(i)),y.Hash(t[i])),!1})(r);return n[0]},y.hashMix=function(t,n){return(t<<5)+t+n},y.Compare=function(t,n){var r,i,u;if(t===n)return 0;switch(r=typeof t,r=="function"?1:r=="boolean"||r=="number"||r=="string"?2:r=="object"?3:0){case 0:return typeof n>"u"?0:-1;case 1:return U.FailWith("Cannot compare function values.");case 2:return t<n?-1:1;case 3:if(t===null)i=-1;else if(n===null)i=1;else if("CompareTo"in t)i=t.CompareTo(n);else if("CompareTo0"in t)i=t.CompareTo0(n);else if(t instanceof p.Array&&n instanceof p.Array)i=y.compareArrays(t,n);else if(t instanceof p.Date&&n instanceof p.Date)i=y.compareDates(t,n);else{u=[0];for(var o in t)if(function(h){return t.hasOwnProperty(h)?n.hasOwnProperty(h)?(u[0]=y.Compare(t[h],n[h]),u[0]!==0):(u[0]=1,!0):!1}(o))break;if(u[0]===0){for(var a in n)if(function(h){return n.hasOwnProperty(h)?!t.hasOwnProperty(h)&&(u[0]=-1,!0):!1}(a))break}i=u[0]}return i}},y.compareArrays=function(t,n){var r,i;if(f.length(t)<f.length(n))return-1;if(f.length(t)>f.length(n))return 1;for(r=0,i=0;r===0&&i<f.length(t);)r=y.Compare(f.get(t,i),f.get(n,i)),i=i+1;return r},y.compareDates=function(t,n){return y.Compare(t.getTime(),n.getTime())},T.Obsolete=function(t){var n,r,i,u,o;if(r=t.s,!(r==null||(!(r!=null&&r.$==2||r!=null&&r.$==3)||(n=r.$1,!1))))for(t.s=null,i=0,u=f.length(n)-1;i<=u;i++)o=f.get(n,i),typeof o=="object"?function(a){T.Obsolete(a)}(o):o()},T.New=function(t){return{s:t}},z=d.View=N.Class({},null,z),Ye.TryParseInt32=function(t,n){return Ye.TryParse(t,-2147483648,2147483647,n)},L.StringApply=function(){return w.$cctor(),w.StringApply},L.ApplyValue=function(t,n,r){var i;function u(o,a){return a==null?null:o(a.$0)}return i=null,[function(o){function a(){r.UpdateMaybe(function(h){var g;return i=t(o),i!=null&&i.$==1&&!y.Equals(i.$0,h)&&(g=[i,i.$0],!0)?g[0]:null})}o.addEventListener("change",a),o.addEventListener("input",a),o.addEventListener("keypress",a)},function(o){var a;return a=n(o),function(h){return u(a,h)}},z.Map(function(o){return i!=null&&i.$==1&&y.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},L.StringSet=function(){return w.$cctor(),w.StringSet},L.StringGet=function(){return w.$cctor(),w.StringGet},L.DateTimeSetUnchecked=function(){return w.$cctor(),w.DateTimeSetUnchecked},L.DateTimeGetUnchecked=function(){return w.$cctor(),w.DateTimeGetUnchecked},L.FileApplyValue=function(t,n,r){var i;function u(o,a){return a==null?null:o(a.$0)}return i=null,[function(o){o.addEventListener("change",function(){r.UpdateMaybe(function(a){var h;return i=t(o),i!=null&&i.$==1&&i.$0!==a&&(h=[i,i.$0],!0)?h[0]:null})})},function(o){var a;return a=n(o),function(h){return u(a,h)}},z.Map(function(o){return i!=null&&i.$==1&&y.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},L.FileSetUnchecked=function(){return w.$cctor(),w.FileSetUnchecked},L.FileGetUnchecked=function(){return w.$cctor(),w.FileGetUnchecked},L.IntSetUnchecked=function(){return w.$cctor(),w.IntSetUnchecked},L.IntGetUnchecked=function(){return w.$cctor(),w.IntGetUnchecked},L.IntSetChecked=function(){return w.$cctor(),w.IntSetChecked},L.IntGetChecked=function(){return w.$cctor(),w.IntGetChecked},L.FloatSetUnchecked=function(){return w.$cctor(),w.FloatSetUnchecked},L.FloatGetUnchecked=function(){return w.$cctor(),w.FloatGetUnchecked},L.FloatSetChecked=function(){return w.$cctor(),w.FloatSetChecked},L.FloatGetChecked=function(){return w.$cctor(),w.FloatGetChecked},re.$cctor=function(){re.$cctor=p.ignore,re.LoadedTemplates=new ce.New$5,re.LocalTemplatesLoaded=!1,re.GlobalHoles=new ce.New$5,re.TextHoleRE="\\${([^}]+)}",re.RenderedFullDocTemplate=null},Z=ue.HashSet=N.Class({SAdd:function(t){return this.add(t)},Contains:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrContains(t,n)},add:function(t){var n,r;return n=this.hash(t),r=this.data[n],r==null?(this.data[n]=[t],this.count=this.count+1,!0):this.arrContains(t,r)?!1:(r.push(t),this.count=this.count+1,!0)},arrContains:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?r=!1:i=i+1;return!r},GetEnumerator:function(){return P.Get(et.concat(this.data))},ExceptWith:function(t){var n;n=P.Get(t);try{for(;n.MoveNext();)this.Remove(n.Current())}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},Count:function(){return this.count},IntersectWith:function(t){var n,r,i,u,o;for(n=new Z.New$4(t,this.equals,this.hash),r=et.concat(this.data),i=0,u=r.length-1;i<=u;i++)o=r[i],n.Contains(o)||this.Remove(o)},Remove:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrRemove(t,n)&&(this.count=this.count-1,!0)},CopyTo:function(t,n){var r,i,u;for(r=et.concat(this.data),i=0,u=r.length-1;i<=u;i++)f.set(t,i+n,r[i])},arrRemove:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?(n.splice.apply(n,[i,1]),r=!1):i=i+1;return!r}},$,Z),Z.New$3=N.Ctor(function(){Z.New$4.call(this,[],y.Equals,y.Hash)},Z),Z.New$4=N.Ctor(function(t,n,r){var i;$.New.call(this),this.equals=n,this.hash=r,this.data=[],this.count=0,i=P.Get(t);try{for(;i.MoveNext();)this.add(i.Current())}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},Z),Z.New$2=N.Ctor(function(t){Z.New$4.call(this,t,y.Equals,y.Hash)},Z),D.LinkElement=function(t,n){D.InsertDoc(t,n,null)},D.InsertDoc=function(t,n,r){for(var i,u,o;;){if(n!=null&&n.$==1)return D.InsertNode(t,n.$0.El,r);if(n!=null&&n.$==2)i=n.$0,i.Dirty=!1,n=i.Current;else{if(n==null)return r;if(n!=null&&n.$==4)return D.InsertNode(t,n.$0.Text,r);if(n!=null&&n.$==5)return D.InsertNode(t,n.$0,r);if(n!=null&&n.$==6)return f.foldBack(function(a,h){return N.Curried3(function(g,R,W){return R==null||R.constructor===be?D.InsertDoc(g,R,W):D.InsertNode(g,R,W)})(t)(a)(h)},n.$0.Els,r);u=n.$1,o=n.$0,n=o,r=D.InsertDoc(t,u,r)}}},D.CreateRunState=function(t,n){return mt.New(Y.get_Empty(),D.CreateElemNode(t,I.EmptyAttr(),n))},D.PerformAnimatedUpdate=function(t,n,r){return Q.get_UseAnimations()?F.Delay(function(){var i,u,o;return i=Y.FindAll(r),u=D.ComputeChangeAnim(n,i),o=D.ComputeEnterAnim(n,i),F.Bind(Q.Play(Q.Append(u,D.ComputeExitAnim(n,i))),function(){return F.Bind(D.SyncElemNodesNextFrame(t,n),function(){return F.Bind(Q.Play(o),function(){return n.PreviousNodes=i,F.Return(null)})})})}):D.SyncElemNodesNextFrame(t,n)},D.PerformSyncUpdate=function(t,n,r){var i;i=Y.FindAll(r),D.SyncElemNode(t,n.Top),n.PreviousNodes=i},D.CreateElemNode=function(t,n,r){var i;return D.LinkElement(t,r),i=I.Insert(t,n),Ve.New(i,r,null,t,ve.Int(),N.GetOptional(i.OnAfterRender))},D.InsertNode=function(t,n,r){return X.InsertAt(t,r,n),n},D.SyncElemNodesNextFrame=function(t,n){function r(i){p.requestAnimationFrame(function(){D.SyncElemNode(t,n.Top),i()})}return it.BatchUpdatesEnabled()?F.FromContinuations(function(i,u,o){return r.apply(null,[i,u,o])}):(D.SyncElemNode(t,n.Top),F.Return(null))},D.ComputeExitAnim=function(t,n){return Q.Concat(f.map(function(r){return I.GetExitAnim(r.Attr)},Y.ToArray(Y.Except(n,Y.Filter(function(r){return I.HasExitAnim(r.Attr)},t.PreviousNodes)))))},D.ComputeEnterAnim=function(t,n){return Q.Concat(f.map(function(r){return I.GetEnterAnim(r.Attr)},Y.ToArray(Y.Except(t.PreviousNodes,Y.Filter(function(r){return I.HasEnterAnim(r.Attr)},n)))))},D.ComputeChangeAnim=function(t,n){var r;function i(u){return I.HasChangeAnim(u.Attr)}return r=function(u){return Y.Filter(i,u)},Q.Concat(f.map(function(u){return I.GetChangeAnim(u.Attr)},Y.ToArray(Y.Intersect(r(t.PreviousNodes),r(n)))))},D.SyncElemNode=function(t,n){t||D.SyncElement(n),D.Sync(n.Children),D.AfterRender(n)},D.SyncElement=function(t){function n(r){function i(u){for(var o,a,h,g;;)if(u!=null&&u.$==0){if(a=u.$1,h=u.$0,i(h))return!0;u=a}else if(u!=null&&u.$==2){if(g=u.$0,g.Dirty)return!0;u=g.Current}else return u!=null&&u.$==6&&(o=u.$0,o.Dirty||f.exists(n,o.Holes))}return i(r.Children)}I.Sync(t.El,t.Attr),n(t)&&D.DoSyncElement(t)},D.Sync=function(t){for(var n,r,i,u,o;;){if(t!=null&&t.$==1)return D.SyncElemNode(!1,t.$0);if(t!=null&&t.$==2)i=t.$0,t=i.Current;else{if(t==null)return null;if(t!=null&&t.$==5)return null;if(t!=null&&t.$==4)return n=t.$0,n.Dirty?(n.Text.nodeValue=n.Value,n.Dirty=!1):null;if(t!=null&&t.$==6)return r=t.$0,f.iter(function(a){D.SyncElemNode(!1,a)},r.Holes),f.iter(function(a){I.Sync(a[0],a[1])},r.Attrs),D.AfterRender(r);u=t.$1,o=t.$0,D.Sync(o),t=u}}},D.AfterRender=function(t){var n;n=N.GetOptional(t.Render),n!=null&&n.$==1&&(n.$0(t.El),N.SetOptional(t,"Render",null))},D.DoSyncElement=function(t){var n,r,i;function u(o,a){for(var h,g,R,W;;){if(o!=null&&o.$==1)return o.$0.El;if(o!=null&&o.$==2){if(g=o.$0,g.Dirty)return g.Dirty=!1,D.InsertDoc(n,g.Current,a);o=g.Current}else{if(o==null)return a;if(o!=null&&o.$==4)return o.$0.Text;if(o!=null&&o.$==5)return o.$0;if(o!=null&&o.$==6)return h=o.$0,h.Dirty&&(h.Dirty=!1),f.foldBack(function(H,q){return H==null||H.constructor===be?u(H,q):H},h.Els,a);R=o.$1,W=o.$0,o=W,a=u(R,a)}}}n=t.El,Ce.Iter((r=t.El,function(o){X.RemoveNode(r,o)}),Ce.Except(Ce.DocChildren(t),Ce.Children(t.El,N.GetOptional(t.Delimiters)))),u(t.Children,(i=N.GetOptional(t.Delimiters),i!=null&&i.$==1?i.$0[1]:null))},Se.$cctor=function(){Se.$cctor=p.ignore,Se.counter=0},We=l.Random=N.Class({Next$1:function(t){return t<0?U.FailWith("'maxValue' must be greater than zero."):At.floor(At.random()*t)}},$,We),We.New=N.Ctor(function(){$.New.call(this)},We),ge=d.Elt=N.Class({},v,ge),ge.New=function(t,n,r){var i,u;return i=D.CreateElemNode(t,n,r.docNode),u=Te.Create(r.updates),new ge.New$1({$:1,$0:i},z.Map2Unit(I.Updates(i.Attr),u.v),t,u)},ge.New$1=N.Ctor(function(t,n,r,i){v.New.call(this,t,n),this.docNode$1=t,this.updates$1=n,this.elt=r,this.rvUpdates=i},ge),se.ofSeqNonCopying=function(t){var n,r;if(t instanceof p.Array)return t;if(t instanceof K)return f.ofList(t);if(t===null)return[];n=[],r=P.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},se.TreeReduce=function(t,n,r){var i;function u(o){return function(a){var h;switch(a<=0?0:a===1&&o>=0&&o<i?1:2){case 0:return t;case 1:return f.get(r,o);case 2:return h=a/2>>0,n(u(o)(h),u(o+h)(a-h))}}}return i=f.length(r),u(0)(i)},se.MapTreeReduce=function(t,n,r,i){var u;function o(a){return function(h){var g;switch(h<=0?0:h===1&&a>=0&&a<u?1:2){case 0:return n;case 1:return t(f.get(i,a));case 2:return g=h/2>>0,r(o(a)(g),o(a+g)(h-g))}}}return u=f.length(i),o(0)(u)},Ve=d.DocElemNode=N.Class({Equals:function(t){return this.ElKey===t.ElKey},GetHashCode:function(){return this.ElKey}},null,Ve),Ve.New=function(t,n,r,i,u,o){var a;return new Ve((a={Attr:t,Children:n,El:i,ElKey:u},N.SetOptional(a,"Delimiters",r),N.SetOptional(a,"Render",o),a))},w.$cctor=function(){var t,n,r,i,u,o,a,h,g,R,W,H,q,k;w.$cctor=p.ignore,w.EmptyAttr=null,w.BoolCheckedApply=function(m){function C(A,O){return O!=null&&O.$==1?void(A.checked=O.$0):null}return[function(A){A.addEventListener("change",function(){return m.Get()!=A.checked?m.Set(A.checked):null})},function(A){return function(O){return C(A,O)}},z.Map(function(A){return{$:1,$0:A}},m.get_View())]},w.StringSet=function(m){return function(C){m.value=C}},w.StringGet=function(m){return{$:1,$0:m.value}},w.StringApply=(t=L.StringGet(),n=L.StringSet(),function(m){return L.ApplyValue(t,n,m)}),w.DateTimeSetUnchecked=function(m){return function(C){m.value=new p.Date(C).toLocaleString()}},w.DateTimeGetUnchecked=function(m){var C,A,O,_;return C=m.value,Le.isBlank(C)?{$:1,$0:-864e13}:(A=(O=0,[(_=yt.TryParse(C),_!=null&&_.$==1&&(O=_.$0,!0)),O]),A[0]?{$:1,$0:A[1]}:null)},w.DateTimeApplyUnchecked=(r=L.DateTimeGetUnchecked(),i=L.DateTimeSetUnchecked(),function(m){return L.ApplyValue(r,i,m)}),w.FileSetUnchecked=function(){return function(){return null}},w.FileGetUnchecked=function(m){var C;return C=m.files,{$:1,$0:f.ofSeq(S.delay(function(){return S.map(function(A){return C.item(A)},U.range(0,C.length-1))}))}},w.FileApplyUnchecked=(u=L.FileGetUnchecked(),o=L.FileSetUnchecked(),function(m){return L.FileApplyValue(u,o,m)}),w.IntSetUnchecked=function(m){return function(C){m.value=Ge(C)}},w.IntGetUnchecked=function(m){var C,A;return C=m.value,Le.isBlank(C)?{$:1,$0:0}:(A=+C,A!==A>>0?null:{$:1,$0:A})},w.IntApplyUnchecked=(a=L.IntGetUnchecked(),h=L.IntSetUnchecked(),function(m){return L.ApplyValue(a,h,m)}),w.IntSetChecked=function(m){return function(C){var A;return A=C.get_Input(),m.value!=A?void(m.value=A):null}},w.IntGetChecked=function(m){var C,A,O;return C=m.value,{$:1,$0:Le.isBlank(C)?!m.checkValidity||m.checkValidity()?new de({$:2,$0:C}):new de({$:1,$0:C}):(A=(O=0,[Ye.TryParseInt32(C,{get:function(){return O},set:function(_){O=_}}),O]),A[0]?new de({$:0,$0:A[1],$1:C}):new de({$:1,$0:C}))}},w.IntApplyChecked=(g=L.IntGetChecked(),R=L.IntSetChecked(),function(m){return L.ApplyValue(g,R,m)}),w.FloatSetUnchecked=function(m){return function(C){m.value=Ge(C)}},w.FloatGetUnchecked=function(m){var C,A;return C=m.value,Le.isBlank(C)?{$:1,$0:0}:(A=+C,p.isNaN(A)?null:{$:1,$0:A})},w.FloatApplyUnchecked=(W=L.FloatGetUnchecked(),H=L.FloatSetUnchecked(),function(m){return L.ApplyValue(W,H,m)}),w.FloatSetChecked=function(m){return function(C){var A;return A=C.get_Input(),m.value!=A?void(m.value=A):null}},w.FloatGetChecked=function(m){var C,A;return C=m.value,{$:1,$0:Le.isBlank(C)?!m.checkValidity||m.checkValidity()?new de({$:2,$0:C}):new de({$:1,$0:C}):(A=+C,p.isNaN(A)?new de({$:1,$0:C}):new de({$:0,$0:A,$1:C}))}},w.FloatApplyChecked=(q=L.FloatGetChecked(),k=L.FloatSetChecked(),function(m){return L.ApplyValue(q,k,m)})},pt.notPresent=function(){throw new $e.New},J.convertTextNode=function(t){var n,r,i,u,o;for(n=null,r=0,i=t.textContent,u=new p.RegExp(E.TextHoleRE(),"g");n=u.exec(i),n!==null;)t.parentNode.insertBefore(self.document.createTextNode(Ee.string(i,{$:1,$0:r},{$:1,$0:u.lastIndex-f.get(n,0).length-1})),t),r=u.lastIndex,o=self.document.createElement("span"),o.setAttribute("ws-replace",f.get(n,1).toLowerCase()),t.parentNode.insertBefore(o,t);u.lastIndex=0,t.textContent=Ee.string(i,{$:1,$0:r},null)},J.failNotLoaded=function(t){we.warn("Instantiating non-loaded template",t)},J.fillTextHole=function(t,n,r){var i;return i=t.querySelector("[ws-replace]"),y.Equals(i,null)?(we.warn("Filling non-existent text hole",r),null):(i.parentNode.replaceChild(self.document.createTextNode(n),i),{$:1,$0:i.getAttribute("ws-replace")})},J.removeHolesExcept=function(t,n){function r(i){E.foreachNotPreserved(t,"["+i+"]",function(u){n.Contains(u.getAttribute(i))||u.removeAttribute(i)})}r("ws-attr"),r("ws-onafterrender"),r("ws-var"),E.foreachNotPreserved(t,"[ws-hole]",function(i){if(!n.Contains(i.getAttribute("ws-hole")))for(i.removeAttribute("ws-hole");i.hasChildNodes();)i.removeChild(i.lastChild)}),E.foreachNotPreserved(t,"[ws-replace]",function(i){n.Contains(i.getAttribute("ws-replace"))||i.parentNode.removeChild(i)}),E.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",M.concat(" ",f.filter(function(u){return n.Contains(f.get(M.SplitChars(u,[":"],1),1))},M.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),E.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,a,h,g;for(u=M.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,a=u.length-1;o<=a;o++)h=f.get(u,o),i.setAttribute(h,(g=new p.RegExp(E.TextHoleRE(),"g"),i.getAttribute(h).replace(g,function(R,W){return n.Contains(W)?R:""})))})},J.fillInstanceAttrs=function(t,n){var r,i,u,o,a;if(J.convertAttrs(n),r=n.nodeName.toLowerCase(),i=t.querySelector("[ws-attr="+r+"]"),y.Equals(i,null))we.warn("Filling non-existent attr hole",r);else for(i.removeAttribute("ws-attr"),u=0,o=n.attributes.length-1;u<=o;u++)a=n.attributes.item(u),a.name=="class"&&i.hasAttribute("class")?i.setAttribute("class",i.getAttribute("class")+" "+a.nodeValue):i.setAttribute(a.name,a.nodeValue)},J.mapHoles=function(t,n){function r(i){E.foreachNotPreserved(t,"["+i+"]",function(u){var o,a;o=(a=null,[n.TryGetValue(u.getAttribute(i).toLowerCase(),{get:function(){return a},set:function(h){a=h}}),a]),o[0]&&u.setAttribute(i,o[1])})}r("ws-hole"),r("ws-replace"),r("ws-attr"),r("ws-onafterrender"),r("ws-var"),E.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",M.concat(" ",f.map(function(u){var o,a,h;return o=M.SplitChars(u,[":"],1),a=(h=null,[n.TryGetValue(f.get(o,1),{get:function(){return h},set:function(g){h=g}}),h]),a[0]?f.get(o,0)+":"+a[1]:u},M.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),E.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,a;for(u=M.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,a=u.length-1;o<=a;o++)(function(){var h;function g(R,W){var H;return H=U.KeyValue(W),R.replace(new p.RegExp("\\${"+H[0]+"}","ig"),"${"+H[1]+"}")}return h=f.get(u,o),i.setAttribute(h,N.Curried3(S.fold)(g)(i.getAttribute(h))(n))})()})},J.fill=function(t,n,r){for(;;)if(t.hasChildNodes())r=n.insertBefore(t.lastChild,r);else return null},J.convertAttrs=function(t){var n,r,i,u,o,a,h,g;function R(W){var H;H=t.getAttribute(W),H==null||t.setAttribute(W,H.toLowerCase())}for(n=t.attributes,r=[],i=[],u=[],o=0,a=n.length-1;o<=a;o++)h=n.item(o),M.StartsWith(h.nodeName,"ws-on")&&h.nodeName!="ws-onafterrender"&&h.nodeName!="ws-on"?(r.push(h.nodeName),i.push(Ee.string(h.nodeName,{$:1,$0:5},null)+":"+h.nodeValue.toLowerCase())):!M.StartsWith(h.nodeName,"ws-")&&new p.RegExp(E.TextHoleRE()).test(h.nodeValue)&&(h.nodeValue=(g=new p.RegExp(E.TextHoleRE(),"g"),h.nodeValue.replace(g,function(W,H){return"${"+H.toLowerCase()+"}"})),u.push(h.nodeName));i.length!=0&&t.setAttribute("ws-on",M.concat(" ",i)),u.length!=0&&t.setAttribute("ws-attr-holes",M.concat(" ",u)),R("ws-hole"),R("ws-replace"),R("ws-attr"),R("ws-onafterrender"),R("ws-var"),f.iter(function(W){t.removeAttribute(W)},r)},Ee.string=function(t,n,r){var i,u;return n==null?r!=null&&r.$==1?(i=r.$0,i<0?"":t.slice(0,i+1)):"":r==null?t.slice(n.$0):(u=r.$0,u<0?"":t.slice(n.$0,u+1))},S.insufficient=function(){return U.FailWith("The input sequence has an insufficient number of elements.")},S.nonNegative=function(){return U.FailWith("The input must be non-negative.")},_e=ue.KeyCollection=N.Class({GetEnumerator:function(){return P.Get(S.map(function(t){return t.K},this.d))}},$,_e),_e.New=N.Ctor(function(t){$.New.call(this),this.d=t},_e),Q.get_UseAnimations=function(){return ee.UseAnimations()},Q.Play=function(t){return F.Delay(function(){return F.Bind(Q.Run(p.ignore,ee.Actions(t)),function(){return ee.Finalize(t),F.Return(null)})})},Q.Append=function(t,n){return{$:0,$0:pe.Append(t.$0,n.$0)}},Q.Run=function(t,n){var r;function i(u){function o(a){return function(h){var g;return g=h-a,n.Compute(g),t(),g<=r?void p.requestAnimationFrame(function(R){o(a)(R)}):u()}}p.requestAnimationFrame(function(a){o(a)(a)})}return r=n.Duration,r===0?F.Zero():F.FromContinuations(function(u,o,a){return i.apply(null,[u,o,a])})},Q.Concat=function(t){return{$:0,$0:pe.Concat(S.map(ee.List,t))}},Q.get_Empty=function(){return{$:0,$0:pe.Empty()}},it.BatchUpdatesEnabled=function(){return He.$cctor(),He.BatchUpdatesEnabled},ht.StartProcessor=function(t){var n;function r(){return F.Delay(function(){return F.Bind(t,function(){var i;return i=n[0],y.Equals(i,1)?(n[0]=0,F.Zero()):y.Equals(i,2)?(n[0]=1,r()):F.Zero()})})}return n=[0],function(){var i;i=n[0],y.Equals(i,0)?(n[0]=1,F.Start(r(),null)):y.Equals(i,1)&&(n[0]=2)}},Te=d.Updates=N.Class({},null,Te),Te.Create=function(t){var n;return n=null,n=Te.New(t,null,function(){var r;return r=n.s,r===null&&(r=T.Copy(n.c()),n.s=r,T.WhenObsoleteRun(r,function(){n.s=null})),r}),n},Te.New=function(t,n,r){return new Te({c:t,s:n,v:r})},$t.New=function(t,n,r,i){var u;return u={DynElem:t,DynFlags:n,DynNodes:r},N.SetOptional(u,"OnAfterRender",i),u},Le.isBlank=function(t){return M.forall(Xe.IsWhiteSpace,t)},de=d.CheckedInput=N.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1}},null,de),mt.New=function(t,n){return{PreviousNodes:t,Top:n}},Y.get_Empty=function(){return{$:0,$0:new Z.New$3}},Y.FindAll=function(t){var n;function r(o,a){for(var h,g,R,W,H;;)switch(o){case 0:if(a!=null&&a.$==0)g=a.$1,R=a.$0,r(0,R),a=g;else if(a!=null&&a.$==1)W=a.$0,a=W,o=1;else if(a!=null&&a.$==2)H=a.$0,a=H.Current;else return a!=null&&a.$==6?(h=a.$0.Holes,function(q){return function(k){f.iter(q,k)}}(u)(h)):null;break;case 1:n.push(a),a=a.Children,o=0;break}}function i(o){return r(0,o)}function u(o){return r(1,o)}return n=[],i(t),{$:0,$0:new Z.New$2(n)}},Y.Filter=function(t,n){return{$:0,$0:ae.Filter(t,n.$0)}},Y.Except=function(t,n){return{$:0,$0:ae.Except(t.$0,n.$0)}},Y.ToArray=function(t){return ae.ToArray(t.$0)},Y.Intersect=function(t,n){return{$:0,$0:ae.Intersect(t.$0,n.$0)}},F.Delay=function(t){return function(n){try{t(null)(n)}catch(r){n.k({$:1,$0:r})}}},F.Bind=function(t,n){return F.checkCancel(function(r){t(ot.New(function(i){var u;i.$==0?(u=i.$0,F.scheduler().Fork(function(){try{n(u)(r)}catch(o){r.k({$:1,$0:o})}})):F.scheduler().Fork(function(){r.k(i)})},r.ct))})},F.Zero=function(){return oe.$cctor(),oe.Zero},F.Start=function(t,n){var r,i;r=(i=F.defCTS()[0],n==null?i:n.$0),F.scheduler().Fork(function(){r.c||t(ot.New(function(u){u.$==1&&F.UncaughtAsyncError(u.$0)},r))})},F.Return=function(t){return function(n){n.k({$:0,$0:t})}},F.scheduler=function(){return oe.$cctor(),oe.scheduler},F.checkCancel=function(t){return function(n){n.ct.c?F.cancel(n):t(n)}},F.defCTS=function(){return oe.$cctor(),oe.defCTS},F.UncaughtAsyncError=function(t){we.log("WebSharper: Uncaught asynchronous exception",t)},F.FromContinuations=function(t){return function(n){var r;function i(u){r[0]?U.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times"):(r[0]=!0,F.scheduler().Fork(u))}r=[!1],t(function(u){i(function(){n.k({$:0,$0:u})})},function(u){i(function(){n.k({$:1,$0:u})})},function(u){i(function(){n.k({$:2,$0:u})})})}},F.cancel=function(t){t.k({$:2,$0:new me.New(t.ct)})},ee.UseAnimations=function(){return Ue.$cctor(),Ue.UseAnimations},ee.Actions=function(t){return ee.ConcatActions(f.choose(function(n){return n.$==1?{$:1,$0:n.$0}:null},pe.ToArray(t.$0)))},ee.Finalize=function(t){f.iter(function(n){n.$==0&&n.$0()},pe.ToArray(t.$0))},ee.ConcatActions=function(t){var n,r,i,u;return n=se.ofSeqNonCopying(t),r=f.length(n),r===0?ee.Const():r===1?f.get(n,0):(i=S.max(S.map(function(o){return o.Duration},n)),u=f.map(function(o){return ee.Prolong(i,o)},n),ee.Def(i,function(o){f.iter(function(a){a.Compute(o)},u)}))},ee.List=function(t){return t.$0},ee.Const=function(t){return ee.Def(0,function(){return t})},ee.Def=function(t,n){return{Compute:n,Duration:t}},ee.Prolong=function(t,n){var r,i,u;return r=n.Compute,i=n.Duration,u=Re.Create(function(){return n.Compute(n.Duration)}),{Compute:function(o){return o>=i?u.f():r(o)},Duration:t}},He.$cctor=function(){He.$cctor=p.ignore,He.BatchUpdatesEnabled=!0},Ke=d.DynamicAttrNode=N.Class({NChanged:function(){return this.updates},NGetExitAnim:function(t){return Q.get_Empty()},NGetEnterAnim:function(t){return Q.get_Empty()},NGetChangeAnim:function(t){return Q.get_Empty()},NSync:function(t){this.dirty&&(this.push(t)(this.value),this.dirty=!1)}},$,Ke),Ke.New=N.Ctor(function(t,n){var r;r=this,$.New.call(this),this.push=n,this.value=void 0,this.dirty=!1,this.updates=z.Map(function(i){r.value=i,r.dirty=!0},t)},Ke),yt.TryParse=function(t){var n;return n=at.parse(t),p.isNaN(n)?null:{$:1,$0:n}},Ye.TryParse=function(t,n,r,i){var u,o;return u=+t,o=u===u-u%1&&u>=n&&u<=r,o&&i.set(u),o},te.$cctor=function(){var t;te.$cctor=p.ignore,te.rxhtmlTag=new p.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi"),te.rtagName=new p.RegExp("<([\\w:]+)"),te.rhtml=new p.RegExp("<|&#?\\w+;"),te.wrapMap=(t=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:t,tbody:t,tfoot:t,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]}),te.defaultWrap=[0,"",""]},Ue.$cctor=function(){Ue.$cctor=p.ignore,Ue.CubicInOut=De.Custom(function(t){var n;return n=t*t,3*n-2*(n*t)}),Ue.UseAnimations=!0},pe.Append=function(t,n){return t.$==0?n:n.$==0?t:{$:2,$0:t,$1:n}},pe.ToArray=function(t){var n;function r(i){for(var u,o;;){if(i.$==1)return n.push(i.$0);if(i.$==2)u=i.$1,o=i.$0,r(o),i=u;else return i.$==3?f.iter(function(a){n.push(a)},i.$0):null}}return n=[],r(t),n.slice(0)},pe.Concat=function(t){var n;return n=se.ofSeqNonCopying(t),se.TreeReduce(pe.Empty(),pe.Append,n)},pe.Empty=function(){return ze.$cctor(),ze.Empty},et.concat=function(t){var n;n=[];for(var r in t)n.push.apply(n,t[r]);return n},$e=l.KeyNotFoundException=N.Class({},ut,$e),$e.New=N.Ctor(function(){$e.New$1.call(this,"The given key was not present in the dictionary.")},$e),$e.New$1=N.Ctor(function(t){this.message=t,be.setPrototypeOf(this,$e.prototype)},$e),Be=F.Scheduler=N.Class({Fork:function(t){var n;n=this,this.robin.push(t),this.idle&&(this.idle=!1,p.setTimeout(function(){n.tick()},0))},tick:function(){var t,n,r;for(n=this,r=at.now(),t=!0;t;)this.robin.length===0?(this.idle=!0,t=!1):(this.robin.shift()(),at.now()-r>40&&(p.setTimeout(function(){n.tick()},0),t=!1))}},$,Be),Be.New=N.Ctor(function(){$.New.call(this),this.idle=!0,this.robin=[]},Be),De=d.Easing=N.Class({},$,De),De.Custom=function(t){return new De.New(t)},De.New=N.Ctor(function(t){$.New.call(this),this.transformTime=t},De),ot.New=function(t,n){return{k:t,ct:n}},oe.$cctor=function(){oe.$cctor=p.ignore,oe.noneCT=vt.New(!1,[]),oe.scheduler=new Be.New,oe.defCTS=[new je.New],oe.Zero=F.Return(),oe.GetCT=function(t){t.k({$:0,$0:t.ct})}},vt.New=function(t,n){return{c:t,r:n}},ae.Filter=function(t,n){return new Z.New$2(f.filter(t,ae.ToArray(n)))},ae.Except=function(t,n){var r;return r=new Z.New$2(ae.ToArray(n)),r.ExceptWith(ae.ToArray(t)),r},ae.ToArray=function(t){var n;return n=f.create(t.Count(),void 0),t.CopyTo(n,0),n},ae.Intersect=function(t,n){var r;return r=new Z.New$2(ae.ToArray(t)),r.IntersectWith(ae.ToArray(n)),r},je=l.CancellationTokenSource=N.Class({},$,je),je.New=N.Ctor(function(){$.New.call(this),this.c=!1,this.pending=null,this.r=[],this.init=1},je),Ce.Children=function(t,n){var r,i,u;if(n!=null&&n.$==1){for(u=[],r=n.$0[0].nextSibling;r!==n.$0[1];)u.push(r),r=r.nextSibling;return{$:0,$0:u}}else return{$:0,$0:f.init(t.childNodes.length,(i=t.childNodes,function(o){return i[o]}))}},Ce.Except=function(t,n){var r;return r=t.$0,{$:0,$0:f.filter(function(i){return f.forall(function(u){return i!==u},r)},n.$0)}},Ce.Iter=function(t,n){f.iter(t,n.$0)},Ce.DocChildren=function(t){var n;function r(i){for(var u,o,a,h;;)if(i!=null&&i.$==2)o=i.$0,i=o.Current;else{if(i!=null&&i.$==1)return n.push(i.$0.El);if(i==null)return null;if(i!=null&&i.$==5)return n.push(i.$0);if(i!=null&&i.$==4)return n.push(i.$0.Text);if(i!=null&&i.$==6)return u=i.$0.Els,function(g){return function(R){f.iter(g,R)}}(function(g){g==null||g.constructor===be?r(g):n.push(g)})(u);a=i.$1,h=i.$0,r(h),i=a}}return n=[],r(t.Children),{$:0,$0:se.ofSeqNonCopying(n)}},me=l.OperationCanceledException=N.Class({},ut,me),me.New=N.Ctor(function(t){me.New$1.call(this,"The operation was canceled.",null,t)},me),me.New$1=N.Ctor(function(t,n,r){this.message=t,this.inner=n,be.setPrototypeOf(this,me.prototype),this.ct=r},me),Re.Create=function(t){return wt.New(!1,t,Re.forceLazy)},Re.forceLazy=function(){var t;return t=this.v(),this.c=!0,this.v=t,this.f=Re.cachedLazy,t},Re.cachedLazy=function(){return this.v},ze.$cctor=function(){ze.$cctor=p.ignore,ze.Empty={$:0}},gt.Clear=function(t){t.splice(0,f.length(t))},wt.New=function(t,n,r){return{c:t,v:n,f:r}},N.OnLoad(function(){s.Main()})})(self);typeof WebSharper<"u"&&(WebSharper.Runtime.ScriptBasePath="/Content/",WebSharper.Runtime.Start());
